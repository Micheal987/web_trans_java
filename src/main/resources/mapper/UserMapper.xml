<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.trans.web_trans_java.mapper.UserMapper">
    <!-- 不熟悉的打开mybatis的debug看sql语句-->
    <!--sql语句-->
    <select id="selectUserByIdSql" resultType="com.trans.web_trans_java.entity.UserModel">
        select * from users where id = #{id}
    </select>
    <!-- login-->
    <select id="selectUserByInfoSql"
            resultType="com.trans.web_trans_java.entity.UserModel">
        SELECT * FROM users
        <where>
            <!--  user_name 这个是我表字段名-->
            <!--  userName 是entity的实体类字段名-->
            <!-- user这个是取决你Mapper的参数名称-->
            <if test="userName != null">AND user_name = #{userName}</if>
            <if test="email != null">AND email = #{email}</if>
        </where>
    </select>
    <!-- 条件分页 -->
    <select id="selectUserListByInfoSql" parameterType="com.trans.web_trans_java.entity.UserModel"
            resultType="com.trans.web_trans_java.entity.UserModel">
        SELECT * FROM users
        <where>
            <!-- 注意条件-->
            <!--  user_name 这个是我表字段名-->
            <!--  userName 是entity的实体类字段名-->
            <!-- user这个是取决你Mapper的参数名称-->
            <if test="user.id !=null">AND id = #{user.id}</if>
            <if test="user.userName !=null">AND user_name = #{user.userName}</if>
            <if test="user.email !=null">AND email = #{user.email}</if>
        </where>
        ORDER BY id DESC
    </select>
    <!-- 条件分页 -->
    <select id="selectUserListByPageSql" parameterType="com.trans.web_trans_java.entity.UserModel"
            resultType="com.trans.web_trans_java.entity.UserModel">
        SELECT * FROM users
        <where>
            <!-- 注意条件-->
            <!--  user_name 这个是我表字段名-->
            <!--  userName 是entity的实体类字段名-->
            <!-- userModel这个是取决你Mapper的参数名称-->
            <if test="userModel.id !=null">AND id = #{userModel.id}</if>
            <if test="userModel.userName !=null">AND user_name = #{userModel.userName}</if>
            <if test="userModel.email !=null">AND email = #{userModel.email}</if>
        </where>
        ORDER BY id DESC
    </select>
    <insert id="createUserSql" parameterType="com.trans.web_trans_java.entity.UserModel" useGeneratedKeys="true"
            keyProperty="ID">
        <!-- insert into (id,name) -->
        <!-- prefix相当加上() -->
        <!-- suffixOverrides 去掉, -->
        INSERT INTO users
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <!--  user_name 这个是我表字段名-->
            <!--  userName 是entity的实体类字段名-->
            <if test="userName !=null">user_name,</if>
            <if test="email !=null">email,</if>
            <if test="password !=null">password,</if>
        </trim>
        <!-- prefix相当加上() -->
        <!-- suffixOverrides 去掉, -->
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <!--  user_name 这个是我表字段名-->
            <!--  userName 是entity的实体类字段名-->
            <if test="userName !=null">#{userName},</if>
            <if test="email !=null">#{email},</if>
            <if test="password !=null">#{password},</if>
        </trim>
    </insert>
    <!-- update-->
    <update id="updateUserByIdSql" parameterType="com.trans.web_trans_java.entity.UserModel">
        UPDATE users
        <set>
            <!--  user_name 这个是我表字段名-->
            <!--  userName 是entity的实体类字段名-->
            <!-- user这个是取决你Mapper的参数名称-->
            <if test="user.userName != null and user.userName != ''">
                user_name = #{user.userName},
            </if>
        </set>
        WHERE id = #{id}
    </update>
    <!--del-->
    <delete id="delUserRemoveListSql">
        DELETE FROM users WHERE id IN
        <foreach collection="ids" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>
    <!--sql语句-->
</mapper>